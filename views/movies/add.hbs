<h3>Add movie Story or review</h3>
<div class="row">
<form action="/movies" method="post" class="col s12">
<div class="row">

    <div class="input-field">

        <input type="text" name="title" id="title">
        <label for="title">Title</label>
    </div>
</div>

<div class="row">
    <div class="input-field">
        <select name="status" id="status">

            <option value="public" selected>Public</option>
            <option value="private" >Private</option>
            
        </select>
        <label for="status">Status</label>
    </div>
</div>

<div class="row">
    <div class="input-field">
        <h5>Tell Us Your movie Storie or review:</h5>
        <textarea id="body" name="body" ></textarea>
    </div>
</div>

<div class="row">
    <input type="submit" value="Save" class="btn">
    <a href="/dashboard" class="btn orange">Cancel</a>
</div>

</form>

</div>

<script>

        const form = document.querySelector('form');
       

            form.addEventListener('submit',  async (e)=>{
              e.preventDefault();
              
              const title = form.title.value;
              const status = form.status.value;
              const body = form.body.value;

              console.log(title, status);
              try{
                 const res = await fetch('/add', {
                  method: 'POST',
                  body: JSON.stringify({ title, body, status}),
                  headers:  {'Content-Type' : 'application/json'}
                  
                });
                const data = await res.json();
               
                 if (data.movie){
                   location.assign('/dashboard');
                 }

               }
              catch (err){
                console.log(err);
              }

         })
      </script>